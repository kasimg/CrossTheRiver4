window.__require=function n(t,o,e){function i(c,a){if(!o[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var u="function"==typeof __require&&__require;if(!a&&u)return u(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}}var d=o[c]={exports:{}};t[c][0].call(d.exports,function(n){return i(t[c][1][n]||n)},d,d.exports,n,t,o,e)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<e.length;c++)i(e[c]);return i}({Animal:[function(n,t,o){"use strict";cc._RF.push(t,"1322e7zL7pGAZ6w70HQuQW9","Animal");var e=n("./Utils");function i(n){if(Array.isArray(n)){for(var t=0,o=Array(n.length);t<n.length;t++)o[t]=n[t];return o}return Array.from(n)}cc.Class({extends:cc.Component,properties:{data:{default:null,type:cc.JsonAsset}},onMouseDown:function(){var n=this,t=this.mainScriptCom.bridgeNode.getComponent("Bridge"),o=null;switch(e.removeMouseDownEvents.apply(void 0,i(this.mainScriptCom.animalComs).concat([this.mainScriptCom.goBtnNode.getComponent("GoBtn")])),this.posInfo){case this.data.json.posInfo.LEFT_RIVER_BANK:var s=t.searchStandPoint();console.log(s),-1!==s&&(t.getOn(this,s),this.posInfo=this.data.json.posInfo.LEFT_STAND_POINT,o=this.moveTo(t.standPoints[this.standPointIndex].leftPos));break;case this.data.json.posInfo.LEFT_STAND_POINT:t.getOff(this),this.posInfo=this.data.json.posInfo.LEFT_RIVER_BANK,o=this.moveTo(this.leftPos);break;case this.data.json.posInfo.RIGHT_STAND_POINT:t.getOff(this),this.posInfo=this.data.json.posInfo.RIGHT_RIVER_BANK,o=this.moveTo(this.rightPos);break;case this.data.json.posInfo.RIGHT_RIVER_BANK:var c=t.searchStandPoint();-1!==c&&(t.getOn(this,c),this.posInfo=this.data.json.posInfo.RIGHT_STAND_POINT,o=this.moveTo(t.standPoints[this.standPointIndex].rightPos))}o&&this.node.runAction(cc.sequence(o,cc.callFunc(function(){e.resumeMouseDownEvents.apply(void 0,i(n.mainScriptCom.animalComs).concat([n.mainScriptCom.goBtnNode.getComponent("GoBtn")])),n.mainScriptCom.ifSucceed()&&n.mainScriptCom.succeed()},this)))},bindMouseDownEvent:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},removeMouseDownEvent:function(){this.node.off(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},initPosInfo:function(){this.posInfo=this.data.json.posInfo.LEFT_RIVER_BANK},moveTo:function(n){var t=n.x,o=n.y;return cc.moveTo(this.timeConsuming/3,t,o)},setTimeConsuming:function(n){this.crossRiverTimeConsuming=n},toggleBridgePosInfo:function(){this.posInfo=this.posInfo===this.data.json.posInfo.LEFT_STAND_POINT?this.data.json.posInfo.RIGHT_STAND_POINT:this.data.json.posInfo.LEFT_STAND_POINT},crossRiver:function(){var n=this.mainScriptCom.bridgeNode.getComponent("Bridge");return this.posInfo===this.data.json.posInfo.LEFT_STAND_POINT?cc.moveTo(this.crossRiverTimeConsuming,n.standPoints[this.standPointIndex].rightPos.x,n.standPoints[this.standPointIndex].rightPos.y):cc.moveTo(this.crossRiverTimeConsuming,n.standPoints[this.standPointIndex].leftPos.x,n.standPoints[this.standPointIndex].leftPos.y)},showTimeConsuming:function(){this.mainScriptCom.AnimalTimeConsumingDisplayer.string=this.chineseName+"\u8fc7\u6865\u9700\u8981"+this.timeConsuming+"\u79d2"},onMouseEnter:function(){this.showTimeConsuming()},bindMouseEnterEvent:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this)},onLoad:function(){this.initPosInfo(),this.bindMouseDownEvent(),this.bindMouseEnterEvent(),(0,e.bindCursorEvent)(this.node,this),(0,e.bindScaleEvent)(this.node,this,.2)},start:function(){}}),cc._RF.pop()},{"./Utils":"Utils"}],Bridge:[function(n,t,o){"use strict";cc._RF.push(t,"73993GDgVhJr5lJgD1XHCkp","Bridge"),cc.Class({extends:cc.Component,properties:{passageComs:[cc.Component],standPoints:[],data:{default:null,type:cc.JsonAsset}},initStandPoints:function(){for(var n=0;n<this.data.json.leftAssemblePoint.length;n++){var t={passage:null};t.leftPos=this.data.json.leftAssemblePoint[n],t.rightPos=this.data.json.rightAssemblePoint[n],this.standPoints.push(t)}},isEmpty:function(){return 2===this.standPoints.filter(function(n){return!n.passage}).length},searchStandPoint:function(){for(var n=0;n<this.standPoints.length;n++)if(!this.standPoints[n].passage)return n;return-1},getPassages:function(){var n=[];return this.standPoints.filter(function(n){return n.passage}).forEach(function(t){n.push(t.passage)}),n},getTimeConsuming:function(){var n=0;return this.getPassages().forEach(function(t){t.timeConsuming>n&&(n=t.timeConsuming)}),n},getOn:function(n,t){n.standPointIndex=t,this.standPoints[t].passage=n},getOff:function(n){this.standPoints[n.standPointIndex].passage=null,n.standPointIndex=-1},onLoad:function(){this.initStandPoints(),console.log(this.getPassages())},start:function(){}}),cc._RF.pop()},{}],GameOver:[function(n,t,o){"use strict";cc._RF.push(t,"f64f5xJCxlChLgTXI/ntJMe","GameOver");var e=n("./Utils");cc.Class({extends:cc.Component,properties:{restartBtn:{default:null,type:cc.Label}},restart:function(){cc.director.loadScene("mainStage")},onMouseDown:function(){this.restart()},bindMouseDownEvent:function(){this.restartBtn.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},onLoad:function(){this.bindMouseDownEvent(),(0,e.bindScaleEvent)(this.restartBtn.node,this,.3),(0,e.bindCursorEvent)(this.restartBtn.node,this)},start:function(){}}),cc._RF.pop()},{"./Utils":"Utils"}],GoBtn:[function(n,t,o){"use strict";cc._RF.push(t,"9d833jSFk1My4nt5AAmnGgi","GoBtn");var e=n("./Utils");function i(n){if(Array.isArray(n)){for(var t=0,o=Array(n.length);t<n.length;t++)o[t]=n[t];return o}return Array.from(n)}cc.Class({extends:cc.Component,properties:{},initTimeConsumingSum:function(){this.timeConsumingSum=0},moveAnimalsAndLantern:function(){var n=this,t=this.mainScriptCom.bridgeNode.getComponent("Bridge"),o=t.getPassages(),s=this.mainScriptCom.lanternNode.getComponent("Lantern"),c=t.getTimeConsuming();o.forEach(function(n){n.setTimeConsuming(c/3),n.node.runAction(cc.sequence(n.crossRiver(),cc.callFunc(function(){n.toggleBridgePosInfo()})))}),s.setTimeConsuming(c/3),s.node.runAction(cc.sequence(s.move(),cc.callFunc(function(){s.toggleBridgePosInfo(),n.updateTimeConsuming(),e.resumeMouseDownEvents.apply(void 0,i(n.mainScriptCom.animalComs).concat([n.mainScriptCom.goBtnNode.getComponent("GoBtn")]))})))},onMouseDown:function(){var n=this.mainScriptCom.bridgeNode.getComponent("Bridge");e.removeMouseDownEvents.apply(void 0,i(this.mainScriptCom.animalComs).concat([this.mainScriptCom.goBtnNode.getComponent("GoBtn")])),n.isEmpty()||this.moveAnimalsAndLantern()},bindMouseDownEvent:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},showTime:function(){var n=this.mainScriptCom.bridgeNode.getComponent("Bridge"),t=this.mainScriptCom.crossTimeConsumingDisplayer;if(n.getPassages().length>0){var o=n.getTimeConsuming();t.string="\u6b64\u6b21\u8fc7\u6cb3\u9700\u8981"+o+"\u79d2",cc.tween(t.node).to(.3,{opacity:255}).start()}},hideTime:function(){var n=this.mainScriptCom.crossTimeConsumingDisplayer;cc.tween(n.node).to(.3,{opacity:0}).start()},updateTimeConsuming:function(){var n=this.mainScriptCom.timer,t=this.mainScriptCom.bridgeNode.getComponent("Bridge");this.timeConsumingSum+=t.getTimeConsuming(),n.string="\u603b\u8017\u65f6: "+this.timeConsumingSum+"\u79d2",this.ifGameOver()&&this.gameOver()},ifGameOver:function(){return this.timeConsumingSum>30},gameOver:function(){cc.director.loadScene("gameOver")},onMouseLeave:function(){this.hideTime()},onMouseEnter:function(){this.showTime()},bindMouseEnterEvent:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this)},bindMouseLeaveEvent:function(){this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},removeMouseDownEvent:function(){this.node.off(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},onLoad:function(){this.initTimeConsumingSum(),this.bindMouseDownEvent(),this.bindMouseEnterEvent(),this.bindMouseLeaveEvent(),(0,e.bindCursorEvent)(this.node,this),(0,e.bindScaleEvent)(this.node,this,.2)},start:function(){}}),cc._RF.pop()},{"./Utils":"Utils"}],Lantern:[function(n,t,o){"use strict";cc._RF.push(t,"3f2731aPmhJp4ZR/UgC1A3V","Lantern"),cc.Class({extends:cc.Component,properties:{data:{default:null,type:cc.JsonAsset}},initLanternPosInfo:function(){this.posInfo=this.data.json.posInfo.LEFT_STAND_POINT},atLeft:function(){return this.posInfo===this.data.json.posInfo.LEFT_STAND_POINT},setTimeConsuming:function(n){this.timeConsuming=n},toggleBridgePosInfo:function(){this.posInfo=this.posInfo===this.data.json.posInfo.LEFT_STAND_POINT?this.data.json.posInfo.RIGHT_STAND_POINT:this.data.json.posInfo.LEFT_STAND_POINT},move:function(){return this.atLeft()?cc.moveTo(this.timeConsuming,this.data.json.lantern.rightPos.x,this.data.json.lantern.rightPos.y):cc.moveTo(this.timeConsuming,this.data.json.lantern.leftPos.x,this.data.json.lantern.leftPos.y)},onLoad:function(){this.initLanternPosInfo()},start:function(){}}),cc._RF.pop()},{}],MainScript:[function(n,t,o){"use strict";cc._RF.push(t,"7ba1dEqxGlOBL8fDv89sKsC","MainScript"),cc.Class({extends:cc.Component,properties:{data:{default:null,type:cc.JsonAsset},animalPrefabNode:{default:null,type:cc.Prefab},animalComs:[cc.Component],lanternNode:{default:null,type:cc.Node},bridgeNode:{default:null,type:cc.Node},goBtnNode:{default:null,type:cc.Node},AnimalTimeConsumingDisplayer:{default:null,type:cc.Label},crossTimeConsumingDisplayer:{default:null,type:cc.Label},timer:{default:null,type:cc.Label},tipBtn:{default:null,type:cc.Label},restartBtnNode:{default:null,type:cc.Node}},createAnimalNodes:function(){var n=this;this.data.json.animals.forEach(function(t){var o=cc.instantiate(n.animalPrefabNode),e=o.getComponent("Animal");Object.keys(t).forEach(function(n){e[n]=t[n]}),cc.loader.loadRes(e.name,cc.SpriteFrame,function(n,t){o.getComponent(cc.Sprite).spriteFrame=t}),e.mainScriptCom=n,o.setPosition(e.leftPos.x,e.leftPos.y),n.animalComs.push(e),n.node.addChild(o)})},initLanternNode:function(){this.lanternNode.setPosition(this.data.json.lantern.leftPos.x,this.data.json.lantern.leftPos.y)},initGoBtnNode:function(){this.goBtnNode.getComponent("GoBtn").mainScriptCom=this},ifSucceed:function(){var n=this;return this.animalComs.filter(function(t){return t.posInfo===n.data.json.posInfo.RIGHT_RIVER_BANK}).length===this.animalComs.length},succeed:function(){cc.director.loadScene("succeed")},onLoad:function(){this.createAnimalNodes(),this.initLanternNode(),this.initGoBtnNode()},start:function(){}}),cc._RF.pop()},{}],Succeed:[function(n,t,o){"use strict";cc._RF.push(t,"01e222T/QRJcKD+7Ucug1Yz","Succeed");var e=n("./Utils");cc.Class({extends:cc.Component,properties:{againBtn:{default:null,type:cc.Label}},again:function(){cc.director.loadScene("mainStage")},onMouseDown:function(){this.again()},bindMouseDownEvent:function(){this.againBtn.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},onLoad:function(){this.bindMouseDownEvent(),(0,e.bindScaleEvent)(this.againBtn.node,this,.3),(0,e.bindCursorEvent)(this.againBtn.node,this)},start:function(){}}),cc._RF.pop()},{"./Utils":"Utils"}],Timer:[function(n,t,o){"use strict";cc._RF.push(t,"df855ALa4ZHuId9GfYLcNn0","Timer"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Tip:[function(n,t,o){"use strict";cc._RF.push(t,"4ecab9M1fBEAZx/AHIgEiOv","Tip");var e=n("./Utils");cc.Class({extends:cc.Component,properties:{ruleContext:{default:null,type:cc.RichText}},initTips:function(){this.ruleContext.node.opacity=0},toggleTipState:function(){var n=0===this.ruleContext.node.opacity?255:0;cc.tween(this.ruleContext.node).to(.2,{opacity:n}).start()},onMouseDown:function(){this.toggleTipState()},bindMouseDown:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},onLoad:function(){this.bindMouseDown(),this.initTips(),(0,e.bindCursorEvent)(this.node,this),(0,e.bindScaleEvent)(this.node,this,.25)},start:function(){}}),cc._RF.pop()},{"./Utils":"Utils"}],Utils:[function(n,t,o){"use strict";cc._RF.push(t,"b0a9fptb0hFD4Xemq9aywCh","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={bindCursorEvent:function(n,t){n.on(cc.Node.EventType.MOUSE_ENTER,function(){cc.game.canvas.style.cursor="pointer"},t),n.on(cc.Node.EventType.MOUSE_LEAVE,function(){cc.game.canvas.style.cursor="default"},t)},bindScaleEvent:function(n,t,o){var e=n.scale;n.on(cc.Node.EventType.MOUSE_ENTER,function i(){n.off(cc.Node.EventType.MOUSE_ENTER,i,t),cc.tween(n).to(.1,{scale:e*(1+o)}).call(function(){n.on(cc.Node.EventType.MOUSE_ENTER,i,t)}).start()},t),n.on(cc.Node.EventType.MOUSE_LEAVE,function(){cc.tween(n).to(.1,{scale:e}).start()},t)},removeMouseDownEvents:function(){for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];t.forEach(function(n){n.node.off(cc.Node.EventType.MOUSE_DOWN,n.onMouseDown,n)})},resumeMouseDownEvents:function(){for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];t.forEach(function(n){n.node.on(cc.Node.EventType.MOUSE_DOWN,n.onMouseDown,n)})}},t.exports=o.default,cc._RF.pop()},{}],restartBtn:[function(n,t,o){"use strict";cc._RF.push(t,"420dasRAZdMz731sl3N0x4V","restartBtn");var e=n("./Utils");cc.Class({extends:cc.Component,properties:{},reloadScene:function(){cc.director.loadScene("mainStage")},onMouseDown:function(){this.reloadScene()},bindMouseDownEvent:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this)},onLoad:function(){this.bindMouseDownEvent(),(0,e.bindCursorEvent)(this.node,this),(0,e.bindScaleEvent)(this.node,this,.3)},start:function(){}}),cc._RF.pop()},{"./Utils":"Utils"}]},{},["Animal","Bridge","GameOver","GoBtn","Lantern","MainScript","Succeed","Timer","Tip","Utils","restartBtn"]);